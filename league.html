<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>League Standings | NFL Survivor League</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts + main styles -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/styles.css" />

  <!-- Supabase JS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.1/dist/umd/supabase.min.js"></script>
</head>
<body>
<header>
  <h1><span>NFL</span> Survivor League</h1>

  <button
    class="nav-toggle"
    id="nav-toggle"
    type="button"
    aria-label="Toggle navigation menu"
    aria-expanded="false"
  >
    ☰ Menu
  </button>

  <nav>
    <a href="index.html">Home</a>
    <a href="submit.html">Submit Pick</a>
    <a href="standings.html">My Standings</a>
    <a href="league.html">League Standings</a>
    <a href="highscore.html">High Score Leaderboard</a>
    <a href="schedule.html">Schedule</a>
    <a href="writeups.html">Weekly Recap</a>
    <a href="admin.html" class="nav-admin-link">Admin</a>
  </nav>
</header>



  <main>
    <section>
      <h2>League Standings</h2>
      <p>
        This table shows all entries in the league and which team was picked each week.
        One row per entry (owner email + entry label), columns for Weeks 1–18.
        Cells are colored green for correct picks, red for incorrect picks, and gray for
        picks that haven't been graded yet.
      </p>
    </section>

  <section id="league-standings-section">
  <h2>League Standings</h2>

  <!-- Entries remaining callout -->
  <p id="entries-remaining-callout" class="entries-remaining-callout"></p>

  <!-- Header row with title + collapse toggle -->
  <div class="breakdown-header-row">
    <h3>Weekly Pick Breakdown</h3>
    <button type="button" id="toggle-breakdown-btn" class="ghost-toggle">
      Hide weekly breakdown
    </button>
  </div>

  <section id="week-breakdown-section" data-collapsed="false">
    <div class="week-breakdown-controls">
      <label for="breakdown-week-select">Select week:</label>
      <select id="breakdown-week-select"></select>
    </div>

    <!-- NEW: Table vs Chart toggle -->
    <div class="breakdown-view-toggle">
      <button
        type="button"
        id="breakdown-view-table-btn"
        class="toggle-chip active"
      >
        Table
      </button>
      <button
        type="button"
        id="breakdown-view-chart-btn"
        class="toggle-chip"
      >
        Pie Chart
      </button>
    </div>

    <p id="week-breakdown-empty" class="message" style="display:none;"></p>

    <!-- NEW: Table container (default view) -->
    <div id="week-breakdown-table"></div>

    <!-- Existing chart wrapper, now with id -->
    <div
      class="chart-wrapper"
      id="week-breakdown-chart-wrapper"
      style="display:none;"
    >
      <canvas id="week-breakdown-chart"></canvas>
    </div>
  </section>

  <p id="league-login-reminder">You must be logged in to view standings.</p>
  <div id="league-standings-message" class="message"></div>
  <div id="league-standings-table-wrapper"></div>
</section>



  </main>

  <footer>
    <p>&copy; <span id="year"></span> NFL Survivor League</p>
    <script>
      document.getElementById('year').textContent = new Date().getFullYear();
    </script>
  </footer>

<script src="assets/supabase-client.js"></script>
<script src="assets/nav.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="assets/league-standings.js"></script>
</body>
</html>
