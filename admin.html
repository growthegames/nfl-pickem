<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin – Grade Picks | NFL Survivor League</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/styles.css" />
<link
  href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css"
  rel="stylesheet"
/>
<script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>

  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.1/dist/umd/supabase.min.js"></script>
</head>
<body>
  <header>
  <h1><span>NFL</span> Survivor League</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="submit.html">Submit Pick</a>
    <a href="standings.html">My Standings</a>
    <a href="league.html">League Standings</a>
    <a href="highscore.html">High Score Leaderboard</a>
    <a href="schedule.html">Schedule</a>
    <a href="writeups.html">Weekly Recap</a>
    <a href="admin.html" class="nav-admin-link">Admin</a>
  </nav>
</header>


  <main>
    <section id="admin-section">
  <h2>Admin – Grade Picks</h2>
  <p>
    Select a week, then mark each NFL team as a win or loss.
    All picks for that team in that week will be updated.
  </p>

  <div id="admin-notice" class="message"></div>

  <div id="admin-controls" style="margin-top:1rem; display:none;">
    <label for="admin-week-select" style="display:block; margin-bottom:0.25rem;">
      Week to grade (1–18)
    </label>
    <input
      type="number"
      id="admin-week-select"
      min="1"
      max="18"
      style="max-width:120px;"
      placeholder="e.g. 1"
    />
    <button type="button" id="admin-load-week-btn" style="margin-left:0.5rem;">
      Load teams for this week
    </button>
  </div>

  <!-- Highest scoring team controls -->
  <div id="admin-highscore-container" style="margin-top:1.5rem; display:none;">
    <h3>Highest Scoring Team (this week)</h3>
    <p style="font-size:0.9rem;">
      This is separate from Survivor. Players earn a point each week they correctly
      pick the highest scoring team, and tie-breaks use total points scored.
    </p>
    <div style="display:flex; flex-wrap:wrap; gap:1rem; align-items:center;">
      <div>
        <label for="admin-hs-team" style="display:block; margin-bottom:0.25rem;">
          Highest scoring team
        </label>
        <select id="admin-hs-team" style="min-width:220px;">
          <!-- filled by admin.js -->
        </select>
      </div>
      <div>
        <label for="admin-hs-points" style="display:block; margin-bottom:0.25rem;">
          Points scored
        </label>
        <input
          type="number"
          id="admin-hs-points"
          min="0"
          max="100"
          style="max-width:120px;"
          placeholder="e.g. 42"
        />
      </div>
    </div>
  </div>

  <div id="admin-teams-container" class="table-wrapper" style="margin-top:1.5rem;"></div>

  <button
    type="button"
    id="admin-save-btn"
    style="margin-top:1rem; display:none;"
  >
    Save Results for This Week
  </button>
        <hr style="margin:2rem 0; border:none; border-top:1px solid rgba(255,255,255,0.1);" />

  <h3>Weekly Comments (Admin Only)</h3>
  <p style="font-size:0.9rem;">
    View all comments that players submitted with their picks for a given week.
    These comments are only visible to league commissioners and admins.
  </p>

  <div id="comments-controls" style="margin-top:0.5rem;">
    <label for="comments-week-input" style="display:block; margin-bottom:0.25rem;">
      Week to review (1–18)
    </label>
    <input
      type="number"
      id="comments-week-input"
      min="1"
      max="18"
      style="max-width:120px;"
      placeholder="e.g. 1"
    />
    <button type="button" id="comments-load-btn" style="margin-left:0.5rem;">
      Load comments
    </button>
  </div>

  <div id="comments-table-container" class="table-wrapper" style="margin-top:1rem;"></div>
  <hr style="margin:2rem 0; border:none; border-top:1px solid rgba(255,255,255,0.1);" />

    <h3>Weekly Writeups (Commissioner)</h3>
  <p style="font-size:0.9rem;">
    Compose the weekly recap that appears on the public "Weekly Recap" page.
    Select a week, load any existing draft, edit the text, and click save.
  </p>

  <div id="writeups-controls" style="margin-top:0.5rem;">
    <label for="writeups-week-input" style="display:block; margin-bottom:0.25rem;">
      Week (1–18)
    </label>
    <input
      type="number"
      id="writeups-week-input"
      min="1"
      max="18"
      style="max-width:120px;"
      placeholder="e.g. 1"
    />
    <button type="button" id="writeups-load-btn" style="margin-left:0.5rem;">
      Load existing writeup
    </button>
  </div>

  <div id="writeups-editor" style="margin-top:0.75rem;">
    <label for="writeups-title-input" style="display:block; margin-bottom:0.25rem;">
      Title
    </label>
    <input
      type="text"
      id="writeups-title-input"
      placeholder="e.g. Week 5 Recap – Kicker Chaos and Overtime Madness"
      style="width:100%; max-width:600px; padding:0.4rem;"
    />

    <label style="display:block; margin:0.75rem 0 0.25rem;">
      Writeup
    </label>
    <!-- Quill editor lives here -->
    <div
      id="writeups-editor-quill"
      style="max-width:800px; background:#fff; color:#000;"
    ></div>

    <div id="writeups-status" class="message" style="margin-top:0.5rem;"></div>

    <button
      type="button"
      id="writeups-save-btn"
      style="margin-top:0.5rem;"
    >
      Save Writeup
    </button>
  </div>


</section>


    <section id="admin-unauthorized" style="display:none; margin-top:1.5rem;">
      <p>You are not authorized to view this page.</p>
      <p>
        If you are the league commissioner, make sure you're logged in with the correct email
        and contact the site owner if you still can't access this page.
      </p>
    </section>
  </main>

  <footer>
    <p>&copy; <span id="year"></span> NFL Survivor League</p>
    <script>
      document.getElementById('year').textContent = new Date().getFullYear();
    </script>
  </footer>

  <script src="assets/supabase-client.js"></script>
  <script src="assets/nav.js"></script>
  <script src="assets/admin.js"></script>
</body>
</html>
